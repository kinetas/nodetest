<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ë¯¸ì…˜ ì¶”ì²œ</title>
  <style>
    body { font-family: sans-serif; padding: 2rem; background-color: #f9f9f9; }
    textarea, button { font-size: 1rem; margin-top: 1rem; width: 100%; padding: 0.5rem; }
    pre { background: #eee; padding: 1rem; margin-top: 1rem; border-radius: 6px; }
  </style>
</head>
<body>
  <!-- <h1>AI ì±—ë´‡ ë¯¸ì…˜ ì¶”ì²œ</h1>
  <textarea id="userInput" rows="4" placeholder="ì˜ˆ: ë‚˜ ìš´ë™ ì¶”ì²œí•´ì¤˜"></textarea>
  <button onclick="sendMessage()">ì¶”ì²œ ìš”ì²­</button>

  <pre id="result">ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</pre> -->

  <h1>AIì—ê²Œ ì§ˆë¬¸í•˜ê¸°</h1>
  <input type="text" id="questionInput" placeholder="ì§ˆë¬¸ì„ ì…ë ¥í•˜ì„¸ìš”">
  <button onclick="askAI()">ì§ˆë¬¸ ë³´ë‚´ê¸°</button>
  <p id="responseText">AI ì‘ë‹µì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤.</p>

  <hr />
  <h2>ğŸ“© AI ì„œë²„ë¡œë¶€í„° ë°›ì€ ë©”ì‹œì§€</h2>
  <div class="box">
    <strong>ì¹´í…Œê³ ë¦¬:</strong> <span id="latestCategory">(ì—†ìŒ)</span><br />
    <strong>ë©”ì‹œì§€:</strong> <span id="latestMessage">(ì•„ì§ ì—†ìŒ)</span>
  </div>

  <script>
    // async function sendMessage() {
    //   const message = document.getElementById('userInput').value;

    //   const res = await fetch('/api/ai/recommend', {
    //     method: 'POST',
    //     headers: { 'Content-Type': 'application/json' },
    //     body: JSON.stringify({ message })
    //   });

    //   const data = await res.json();
    //   document.getElementById('result').textContent = data.result || data.error || "ì˜¤ë¥˜ ë°œìƒ";
    // }

    async function askAI() {
          const question = document.getElementById('questionInput').value;
          const responseElement = document.getElementById('responseText');
          try {
              const response = await fetch('/api/ai/ask', {
                  method: 'POST',
                  headers: {
                      'Content-Type': 'application/json'
                  },
                  body: JSON.stringify({ question })
              });
              const data = await response.json();
              if (data.result) {
                  responseElement.textContent = data.result.message || JSON.stringify(data.result);
              } else {
                  responseElement.textContent = "ì˜¤ë¥˜: ì‘ë‹µ ì—†ìŒ";
              }
          } catch (err) {
              responseElement.textContent = "ì˜¤ë¥˜ ë°œìƒ: " + err.message;
          }
      }

    //   async function loadLatestAiMessage() {
    //   try {
    //     const res = await fetch('/api/ai/latest');
    //     const data = await res.json();
    //     document.getElementById('latestCategory').textContent = data.category || '(ì—†ìŒ)';
    //     document.getElementById('latestMessage').textContent = data.message || '(ì—†ìŒ)';
    //   } catch (e) {
    //     document.getElementById('latestCategory').textContent = '(ì—ëŸ¬ ë°œìƒ)';
    //     document.getElementById('latestMessage').textContent = '(ì—ëŸ¬ ë°œìƒ)';
    //   }
    // }

    // setInterval(loadLatestAiMessage, 3000);
    // window.onload = loadLatestAiMessage;
  </script>
</body>
</html>
